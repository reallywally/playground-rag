# 개선사항

클로드코드한테 전체적으로 분석해서 RAG를 학습하는데 있어서 개선하면 좋은 부분 알려줘 라고 받은 답변이다.
1개씩 개선해 보자

1. 벡터 스토어 및 임베딩 최적화

- 하이브리드 검색: config/settings.py:33에서 유사도 검색만 사용 중 → 키워드 검색과 결합하여 검색 품질 향상
- 임베딩 모델 업그레이드: OpenAI 기본 임베딩 → text-embedding-3-large 또는 다국어 특화 모델 활용
- 벡터 인덱스 최적화: Chroma DB 설정에 HNSW 매개변수 튜닝 추가

2. 문서 처리 개선

- 청킹 전략: pdf_service.py:37-41의 고정 크기 분할 → 의미 단위 분할(semantic chunking) 도입
- 메타데이터 강화: 페이지 번호 외에 제목, 섹션, 테이블/이미지 정보 추가
- 전처리 파이프라인: 표, 이미지, 헤더/푸터 처리 로직 추가

3. 검색 및 생성 품질

- 다중 검색 전략: chat_service.py:83-86에서 단일 검색 → MMR(Maximal Marginal Relevance) 적용
- 컨텍스트 윈도우 관리: 토큰 제한 고려한 동적 컨텍스트 크기 조절
- 답변 품질 검증: 생성된 답변과 소스 문서 간 관련성 검증 로직 추가

4. 성능 및 확장성

- 벡터 스토어 영속성: 서비스 재시작 시 컬렉션 로딩 최적화
- 캐싱 시스템: 자주 묻는 질문에 대한 답변 캐싱
- 비동기 처리: PDF 업로드와 벡터화 과정 분리하여 UX 개선

5. 모니터링 및 평가

- 검색 메트릭: Precision@K, Recall@K, MRR 측정 로직 추가
- 사용자 피드백: 답변 품질에 대한 평점/피드백 수집 시스템
- 로깅 강화: RAG 파이프라인 각 단계별 상세 로깅

6. UI/UX 개선

- 소스 하이라이팅: 답변 근거가 된 문서 구간 시각적 표시
- 검색 필터링: 특정 문서나 페이지 범위 내 검색 옵션
- 대화 분기: 여러 답변 옵션 제시 기능

7. 보안 및 안정성

- 입력 검증: main.py:32-38의 파일 검증 강화 (악성 PDF 탐지)
- 에러 핸들링: chat_service.py:117-122의 일반적 예외 처리 → 구체적 오류 분류
- 레이트 리미팅: API 호출 제한으로 비용 및 남용 방지
